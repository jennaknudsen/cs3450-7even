{# This page is primarily for the chef #}
{% load static %}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="{% static 'dansbagels/style.css' %}" type="text/css"/>
        <link rel="shortcut icon" href="{%static 'dansbagels/images/favicon.ico' %}"/>
        <title>Home</title>
    </head>
    <body>
        <div id="top-bar">
            <!-- For some reason, I can't get these style things to work in CSS; the other ones work -->
            <span id="banner-title" style="float:left; font-size:larger;">Dan's Bagel Shop</span>
            <a href="/dansbagels/home" class="link">Home</a>
            <a href="/dansbagels/createAccount" class="link">Create Account</a>
            <a href="/dansbagels/login" class="link">Log in</a>
            <a href="/dansbagels/account" class="link">Account</a>
            <a href="/dansbagels/orderBagel" class="link">Place Order</a>
            {% if permitted %}
                <a href="/dansbagels/activeOrders" class="link">Active Orders</a>
                <a href="/dansbagels/completedOrders" class="link">Completed Orderes</a>
                <a href="/dansbagels/inventory">Inventory</a>
            {% endif %}
        </div>
        <!-- anything in the style attribute here isn't showing up just from CSS -->

        {% if permitted %}
            {% if admin %}
            <div id="admin-links">
                <a href="/dansbagels/admin/database">Database Info</a>
                <a href="/dansbagels/admin/createEmployeeAccount">Create Employee Account</a>
            </div>
            {% endif %}

        <h1>List of orders in progress</h1>
        {% for order in orders %}
            <div>
                <p>{{ order.personOrdered }}</p>
                <p>{{ order.pickUpTime }}</p>
                <p>${{ order.orderCost_decimal }}</p>
                <p>{{ order.orderInstructions_text }}</p>
                {% for item in orderLineItems %}
                    {% if item.order == order %}
                    <p>{{item.itemOrdered}} x{{item.orderQuantity_int}}</p>
                    {% endif %}
                {% endfor %}
                <p>Order Status: {{ order.currentStatus }}</p>
                <!-- This form is for updating the order -->
                <form method="post">
                    {% csrf_token %}
                    {{form}}
                    <button type="submit" value="{{order.id}}" name="UpdateButton">Update Order</button>
                </form>
                <!-- This form is for canceling the order -->
                <form method="post" action="{% url 'cancelOrder' %}">
                    {% csrf_token %}
                        <input type="hidden" value="false" name="refund">
                        <button type="submit" value="{{order.id}}" name="cancel">Cancel Order</button>
                </form>
            </div>
            {% endfor %}
        {# Order status stuff goes here #}
        {% endif %}
    </body>
</html>